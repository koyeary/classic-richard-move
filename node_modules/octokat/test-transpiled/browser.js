'use strict';

/* eslint-env mocha */
var fetchVCR = require('fetch-vcr');
fetchVCR.configure({
  fixturePath: '../node_modules/octokat-fixtures/_fixtures',
  headerBlacklist: ['authorization', 'user-agent']
});

require('./all');

describe('Root construction', function () {
  beforeEach(function () {
    window.Octokat.Fetch = fetchVCR;
  });

  it('can be instantiated via window.Octokat', function () {
    var x = new window.Octokat();
    if (!x) {
      throw new Error('Octokat was not instantiated');
    }
  });

  it('supports a custom fetch function', function (done) {
    window.Octokat.Fetch = function (url, opts) {
      done();
      // Continue by using the VCR version of fetch
      return fetchVCR(url, opts);
    };
    var octo = new Octokat();
    octo.zen.read().catch(done); // Propagate the error up
  });
});

mocha.checkLeaks();

mocha.run();
//# sourceMappingURL=browser.js.map